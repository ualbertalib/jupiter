require 'test_helper'

class IdentityTest < ActiveSupport::TestCase

  context 'associations' do
    should belong_to(:user)
  end

  context 'validations' do
    context '#provider' do
      should validate_presence_of(:provider)
    end

    context '#uid' do
      should validate_presence_of(:uid)
      should validate_uniqueness_of(:uid).scoped_to(:provider)
    end

    context '#user_id' do
      should validate_uniqueness_of(:user_id).scoped_to(:provider)
    end
  end

end
