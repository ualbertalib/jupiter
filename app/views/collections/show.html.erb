<% page_title(@collection.title) %>

<%= render partial: 'show_breadcrumbs' %>

<div class="d-flex flex-wrap justify-content-between align-items-center mt-3">
  <h1><%= @collection.title %></h1>

  <% if policy(@collection).edit? || policy(@collection).destroy? %>
    <div class="btn-group">
      <% if policy(@collection).edit? %>
        <%= link_to edit_admin_community_collection_path(@community, @collection),
            class:'btn btn-outline-secondary' do %>
          <%= fa_icon('pencil-square-o') %>
          <%= t('edit') %>
        <% end %>
      <% end %>
      <% if policy(@collection).destroy? %>
        <%= link_to admin_community_collection_path(@community, @collection), method: :delete,
            class:'btn btn-outline-secondary', data: { confirm: t('.delete_confirm', title: @collection.title) } do %>
          <%= fa_icon('trash') %>
          <%= t('delete') %>
        <% end %>
      <% end %>
    </div>
  <% end %>
</div>

<% if @collection.description.present? %>
  <div class="p-3">
    <p><%= @collection.description %></p>
  </div>
<% end %>

<div class="d-flex flex-wrap align-items-center justify-content-between mt-3">
  <h4>
    <%= t('.items_list_header') %>
  </h4>
  <% if policy(:item).new? %>
      <%= link_to new_item_path,
          class: 'btn btn-primary' do %>
        <%= fa_icon('plus-circle') %>
        <%= t('items.new.header') %>
      <% end %>
  <% end %>
</div>


<div class="row mt-3">
  <div class="col">
    <div class="list-group">
      <% if @collection.member_items.count > 0 %>
        <% @collection.member_items.each do |item| %>
          <div class="list-group-item list-group-item-action d-flex justify-content-between align-items-start">
            <%= link_to item.title, item_path(item) %>
            <div class="btn-group">
              <% if policy(@collection).edit? %>
                <%= link_to edit_item_path(item), class:'btn btn-outline-secondary'  do %>
                  <%= fa_icon('trash') %>
                  <%= t('edit') %>
                <% end %>
              <% end %>
              <% if policy(@collection).destroy? %>
                <%= link_to item_path(item), method: :delete, class:'btn btn-outline-secondary',
                    data: { confirm: t('.item_delete_confirm', title: item.title) }  do %>
                  <%= fa_icon('trash') %>
                  <%= t('delete') %>
                <% end %>
              <% end %>
            </div>
          </div>
        <% end %>
      <% else %>
          <%= t('.no_items_in_collection') %>
      <% end %>
    </div>
  </div>
</div>
