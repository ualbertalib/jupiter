<!DOCTYPE html>
<html lang="en">
  <head prefix="og: http://ogp.me/ns#">
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/manifest.json">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#dbe1ef">
    <meta name="msapplication-TileColor" content="#dbe1ef">
    <meta name="theme-color" content="#dbe1ef">

    <title><%= page_title(t('site_name')) %></title>
    <meta name="description" content="<%= page_description %>">
    <meta name="generator" content="<%= "Jupiter #{Jupiter::VERSION} - https://github.com/ualbertalib/jupiter" %>">

    <%# Open Graph - http://ogp.me/ %>
    <meta property="og:type"         content="<%= page_type %>">
    <meta property="og:site_name"    content="<%= t('site_name') %>">
    <meta property="og:url"          content="<%= request.base_url + request.fullpath %>">
    <meta property="og:locale"       content="en_US">
    <meta property="og:title"        content="<%= page_title %>">
    <meta property="og:description"  content="<%= page_description %>">
    <meta property="og:image"        content="<%= request.base_url + page_image %>">

    <%#  Twitter Card - https://dev.twitter.com/cards/types/summary %>
    <meta name="twitter:card"        content="summary">
    <meta name="twitter:site"        content="@uofalibraries">
    <meta name="twitter:url"         content="<%= request.base_url + request.fullpath %>">
    <meta name="twitter:title"       content="<%= page_title %>">
    <meta name="twitter:description" content="<%= page_description %>">
    <meta name="twitter:image"       content="<%= request.base_url + page_image %>">

    <%= yield(:extra_social_meta) %>

    <%= canonical_tag -%>


    <%= csrf_meta_tags %>

    <%# TODO: Investigate CSP when more documentation with doing js.erb/turbolinks etc. %>
    <%#= csp_meta_tag %>

    <%= stylesheet_link_tag 'application', media: 'all', 'data-turbolinks-track': 'reload' %>
    <%= javascript_include_tag 'application', 'data-turbolinks-track': 'reload' %>

    <%= render partial: 'analytics' %>

    <%= yield(:head) %>
  </head>

  <body>
    <%= render partial: 'navbar' %>
    <main id="content">
      <%= render partial: 'announcement' %>
      <%= render partial: 'flash' %>
      <%= content_for?(:content) ? yield(:content) : yield %>
    </main>
    <%= render partial: 'footer' %>
  </body>
</html>
