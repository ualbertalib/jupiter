<header class="navbar navbar-inverse fixed-top navbar-toggleable-md bg-primary">
  <nav class="container">
    <div class="d-flex justify-content-between">
      <%= link_to t('site_name'), root_path, class: 'navbar-brand' %>
      <button type="button"
              class="navbar-toggler collapsed btn btn-primary"
              data-toggle="collapse"
              data-target="#jupiter-main-nav"
              aria-controls="jupiter-main-nav"
              aria-expanded="false"
              aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
    </div>
    <div class="navbar-collapse collapse" id="jupiter-main-nav" aria-expanded="false">
      <ul class="nav navbar-nav mr-auto">
        <li role="presentation" class="nav-item">
          <%= link_to t('.links.communities'), communities_path, class: 'nav-link' %>
        </li>
        <li role="presentation" class="nav-item">
          <%= link_to t('.links.new_work'), new_work_path, class: 'nav-link' %>
        </li>
      </ul>
      <ul class="nav navbar-nav pull-xs-right mr-2">
        <li role="presentation" class="nav-item mr-3">
          <form class="form-inline">
            <div class="input-group">
              <%= search_field_tag 'search', placeholder: t('.search.placeholder'), class: 'form-control' %>
              <button type="submit" class="input-group-addon btn btn-outline-secondary">
                <%= link_to t('.search.button_text') %>
              </button>
            </div>
          </form>
        </li>
        <% if current_user.present? %>
          <li class="dropdown nav-item">
            <a href="#"
              role="button"
              id="jupiter-user-nav-downdown"
              class="dropdown-toggle nav-link"
              data-toggle="dropdown"
              aria-haspopup="true"
              aria-expanded="false">
              <%= current_user.display_name %> <span class="caret"></span>
            </a>
            <div role="menu" class="dropdown-menu dropdown-menu-right" aria-labelledby="#jupiter-user-nav-downdown">
              <div class="dropdown-header">
                <%= t('.user_dropdown.heading_html', display_name: current_user.display_name) %>
              </div>
              <div class="dropdown-divider"></div>
              <%= link_to t('.links.profile'), "#TODO", class: 'dropdown-item' %>
              <div class="dropdown-divider"></div>
              <%= link_to t('.links.settings'), "#TODO", class: 'dropdown-item' %>
              <%= link_to t('.links.logout'), logout_path, class: 'dropdown-item' %>

              <% if current_user.admin? %>
                <div class="dropdown-divider"></div>
                <%= link_to t('.links.admin'), "#TODO", class: 'dropdown-item' %>
              <% end %>
            </div>
          </li>
        <% else %>
          <li role="presentation" class="nav-item">
            <%= link_to t('.links.login'), login_path, class: 'nav-item nav-link' %>
          </li>
        <% end %>
      </ul>
    </div>
  </nav>
</header>
